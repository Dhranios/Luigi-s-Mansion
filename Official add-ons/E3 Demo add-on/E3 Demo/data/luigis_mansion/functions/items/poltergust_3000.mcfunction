execute if score #poltergust_500 Selected matches 0 if entity @s[tag=!looking_at_map,tag=!death_animation,tag=!revive_animation,tag=!polterpup_reviving,nbt={Inventory:[{tag:{luigis_mansion:{namespace:"luigis_mansion",id:"poltergust_3000"}}}]},tag=!disable_poltergust] run function luigis_mansion:items/poltergust_3000/tick
execute if score #poltergust_500 Selected matches 1 if entity @s[tag=!looking_at_map,tag=!death_animation,tag=!revive_animation,tag=!polterpup_reviving,nbt={Inventory:[{tag:{luigis_mansion:{namespace:"luigis_mansion",id:"poltergust_3000"}}}]},scores={Room=..-1},tag=!disable_polterust] run function luigis_mansion:items/poltergust_3000/tick
execute unless entity @s[scores={Shrunk=1..}] if data storage luigis_mansion:data rooms.underground_lab{cleared:1b} if entity @s[nbt=!{Inventory:[{tag:{luigis_mansion:{namespace:"luigis_mansion",id:"poltergust_3000"}}}]},tag=!using_selection_menu,nbt=!{Inventory:[{tag:{luigis_mansion:{namespace:"e3_demo",id:"poltergust_500"}}}]}] run function luigis_mansion:items/poltergust_3000/give
execute if score #poltergust_500 Selected matches 1 if entity @s[nbt={Inventory:[{tag:{luigis_mansion:{namespace:"luigis_mansion",id:"poltergust_3000"}}}]},scores={Room=0..}] run function e3_demo:items/poltergust_3000/turn_to_poltergust_500
execute if entity @s[scores={FurnitureSizeWidth=1..}] run function luigis_mansion:selection_menu/game_boy_horror/scan/target_furniture/collision_box_check
execute if entity @s[scores={FurnitureSizeForward=1..}] run function luigis_mansion:selection_menu/game_boy_horror/scan/target_furniture/collision_rotated_box_check
execute if entity @s[scores={FurnitureSizeRadius=1..}] run function luigis_mansion:selection_menu/game_boy_horror/scan/target_furniture/collision_radius_check
execute if entity @s[tag=hit,nbt=!{ArmorItems:[{tag:{luigis_mansion:{scan_message:"warp"}}}]},nbt=!{ArmorItems:[{tag:{luigis_mansion:{scan_message:""}}}]},nbt=!{ArmorItems:[{tag:{luigis_mansion:{scan_message:"spawn_ghost"}}}]}] unless entity @e[tag=furniture_scanned,tag=this_interact,limit=1] if entity @p[tag=scanning_player,tag=!gooigi,limit=1] run tellraw @a[tag=same_room] {"type":"translatable","translate":"chat.type.text","with":[{"type":"selector","selector":"@p[tag=scanning_player]","color":"green"},{"type":"nbt","nbt":"ArmorItems[3].tag.luigis_mansion.scan_message","source":"entity","entity":"@s","interpret":true}]}
execute if entity @s[tag=hit,nbt={ArmorItems:[{tag:{luigis_mansion:{scan_message:"warp"}}}]}] unless entity @e[tag=furniture_scanned,tag=this_interact,limit=1] if score #can_warp Selected matches 1 as @p[tag=scanning_player,tag=!gooigi] unless entity @s[scores={Dialog=1..}] run tag @s add warp
execute if entity @s[tag=hit,nbt={ArmorItems:[{tag:{luigis_mansion:{scan_message:"warp"}}}]}] unless entity @e[tag=furniture_scanned,tag=this_interact,limit=1] if score #can_warp Selected matches 1 as @p[tag=scanning_player,tag=!gooigi,scores={Dialog=1..}] run tellraw @a[tag=same_room] {"type":"translatable","translate":"chat.type.text","with":[{"type":"selector","selector":"@p[tag=scanning_player]","color":"green"},{"type":"translatable","translate":"luigis_mansion:message.player.scan_furniture.96"}]}
execute if entity @s[tag=hit,nbt={ArmorItems:[{tag:{luigis_mansion:{scan_message:"warp"}}}]}] unless entity @e[tag=furniture_scanned,tag=this_interact,limit=1] if score #can_warp Selected matches 0 as @p[tag=scanning_player,tag=!gooigi] run tellraw @a[tag=same_room] {"type":"translatable","translate":"chat.type.text","with":[{"type":"selector","selector":"@p[tag=scanning_player]","color":"green"},{"type":"translatable","translate":"luigis_mansion:message.player.scan_furniture.96"}]}
execute if entity @s[tag=hit,nbt={ArmorItems:[{tag:{luigis_mansion:{scan_message:"spawn_ghost"}}}]}] unless entity @e[tag=furniture_scanned,tag=this_interact,limit=1] run function luigis_mansion:entities/furniture/spawn/ghost
execute if entity @s[tag=hit] run tag @e[tag=this_interact,limit=1] add furniture_scanned
tag @s remove hit
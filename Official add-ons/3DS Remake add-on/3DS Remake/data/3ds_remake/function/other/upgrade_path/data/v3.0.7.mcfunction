execute unless data storage luigis_mansion:data update_data{data_version:5} run function 3ds_remake:other/upgrade_path/current_data/v3.0.6
data modify storage luigis_mansion:data update_data merge value {data_version:6,portrait_ghosts:{luigis_mansion:{neville:{always_pull:0b,flee_task:"random"},lydia:{always_pull:0b,flee_task:"random_in_range"},chauncey:{always_pull:1b,flee_task:"circle"},floating_whirlindas:{male:{always_pull:0b,flee_task:"random"},female:{always_pull:0b,flee_task:"random"}},shivers:{always_pull:0b,flee_task:"random"},melody_pianissima:{always_pull:0b,flee_task:"random_in_range"},mr_luggs:{always_pull:0b,flee_task:"random"},spooky:{always_pull:0b,flee_task:"random"},bogmire:{always_pull:1b,flee_task:"random"},biff_atlas:{always_pull:0b,flee_task:"random"},miss_petunia:{always_pull:0b,flee_task:"random"},nana:{always_pull:0b,flee_task:"random"},slim_bankshot:{always_pull:0b,flee_task:"random"},henry_and_orville:{henry:{always_pull:0b,flee_task:"circle"},orville:{always_pull:0b,flee_task:"circle"}},madame_clairvoya:{always_pull:0b,flee_task:"random"},uncle_grimmly:{always_pull:0b,flee_task:"random"},clockwork_soldiers:{blue:{always_pull:0b,flee_task:"alternate"},green:{always_pull:0b,flee_task:"alternate"},pink:{always_pull:0b,flee_task:"alternate"}},jarvis:{always_pull:0b,flee_task:"loops"},sir_weston:{always_pull:0b,flee_task:"random"},sue_pea:{always_pull:0b,flee_task:"random"},vincent_van_gore:{always_pull:0b,flee_task:"random"}}},ghosts:{luigis_mansion:{gold_ghost:{always_pull:0b,flee_task:"random"},temper_terror:{always_pull:0b,flee_task:"random"},speedy_spirit:{always_pull:1b,flee_task:"random"},purple_puncher:{always_pull:0b,flee_task:"alternate"},flash:{always_pull:0b,flee_task:"alternate"},blue_twirler:{always_pull:1b,flee_task:"random"},blue_blaze:{always_pull:1b,flee_task:"random"},garbage_can_ghost:{always_pull:0b,flee_task:"random"},mr_bones:{always_pull:0b,flee_task:"alternate"},ceiling_surprise:{always_pull:1b,flee_task:"random"},purple_bomber:{always_pull:1b,flee_task:"random"},bowling_ghost:{always_pull:0b,flee_task:"random"},grabbing_ghost:{always_pull:0b,flee_task:"circle"},red_grabbing_ghost:{always_pull:0b,flee_task:"circle"},mirror_ghost:{always_pull:0b,flee_task:"circle"},cinema_ghost:{always_pull:0b,flee_task:"circle"},ghost_guy:{always_pull:0b,flee_task:"circle"},dancing_ghost_guy:{always_pull:0b,flee_task:"circle"},waiter:{always_pull:0b,flee_task:"circle"}}}}
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run tag @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"blue_blaze"}}}] add always_pull_players
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run tag @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"blue_twirler"}}}] add always_pull_players
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run tag @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"bogmire"}}}] add always_pull_players
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run tag @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"ceiling_surprise"}}}] add always_pull_players
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run tag @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"chauncey"}}}] add always_pull_players
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run tag @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"purple_bomber"}}}] add always_pull_players
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run tag @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"speedy_spirit"}}}] add always_pull_players
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[tag=ghost,scores={VulnerableTime=0..}] FleeTask 0
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"cinema_ghost"}}}] FleeTask 2
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"clockwork_soldier"}}}] FleeTask 1
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"dancing_ghost_guy"}}}] FleeTask 2
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"flash"}}}] FleeTask 1
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"ghost_guy"}}}] FleeTask 2
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"grabbing_ghost"}}}] FleeTask 2
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"henry"}}}] FleeTask 2
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"jarvis"}}}] FleeTask 4
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"lydia"}}}] FleeTask 3
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"melody_pianissima"}}}] FleeTask 3
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"mirror_ghost"}}}] FleeTask 2
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"mr_bones"}}}] FleeTask 1
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"orville"}}}] FleeTask 2
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"purple_puncher"}}}] FleeTask 1
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"red_grabbing_ghost"}}}] FleeTask 2
execute if data storage luigis_mansion:data current_state.current_data{data_index:1} run scoreboard players set @e[nbt={data:{entity:{namespace:"luigis_mansion",id:"waiter"}}}] FleeTask 2
tag @s add gallery_portrait_menu

data modify storage luigis_mansion:data menu_options set value {no_exit:1b,options:[]}

execute store result score #temp Time run function 3ds_remake:selection_menu/gallery_portrait/get_portrait_ghost_rank with storage luigis_mansion:data current_state.current_data.portrait_battle

data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:damage":22,"minecraft:unbreakable":{show_in_tooltip:0b},"minecraft:custom_model_data":0,"minecraft:attribute_modifiers":{modifiers:[]},"minecraft:item_name":'{"type":"translatable","translate":"3ds_remake:item.menu.gallery_portrait.change_frame.bronze"}',"minecraft:custom_data":{option:{id:"reload"}}}}
execute if score #temp Time matches 1.. run data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:damage":22,"minecraft:unbreakable":{show_in_tooltip:0b},"minecraft:custom_model_data":0,"minecraft:attribute_modifiers":{modifiers:[]},"minecraft:item_name":'{"type":"translatable","translate":"3ds_remake:item.menu.gallery_portrait.change_frame.silver"}',"minecraft:custom_data":{option:{id:"reload"}}}}
execute if score #temp Time matches 2.. run data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:damage":22,"minecraft:unbreakable":{show_in_tooltip:0b},"minecraft:custom_model_data":0,"minecraft:attribute_modifiers":{modifiers:[]},"minecraft:item_name":'{"type":"translatable","translate":"3ds_remake:item.menu.gallery_portrait.change_frame.gold"}',"minecraft:custom_data":{option:{id:"reload"}}}}
execute if score #temp Time matches 3.. run data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:damage":22,"minecraft:unbreakable":{show_in_tooltip:0b},"minecraft:custom_model_data":0,"minecraft:attribute_modifiers":{modifiers:[]},"minecraft:item_name":'{"type":"translatable","translate":"3ds_remake:item.menu.gallery_portrait.change_frame.platinum"}',"minecraft:custom_data":{option:{id:"reload"}}}}

data modify storage luigis_mansion:data menu_options.options[].id set from storage luigis_mansion:data current_state.current_data.portrait_battle.portraits.id
execute if data storage luigis_mansion:data current_state.current_data.portrait_battle.portraits.components."minecraft:unbreakable" run data modify storage luigis_mansion:data menu_options.options[].components."minecraft:unbreakable" set value {show_in_tooltip:0b}
data modify storage luigis_mansion:data menu_options.options[].components."minecraft:damage" set from storage luigis_mansion:data current_state.current_data.portrait_battle.portraits.components."minecraft:damage"
data modify storage luigis_mansion:data menu_options.options[].components."minecraft:custom_model_data" set from storage luigis_mansion:data current_state.current_data.portrait_battle.portraits.components."minecraft:custom_model_data"
data modify storage luigis_mansion:data menu_options.options[0] merge from storage luigis_mansion:data current_state.current_data.portrait_battle.portraits.components."minecraft:custom_data".model_data.bronze
execute if data storage luigis_mansion:data menu_options.options[1] run data modify storage luigis_mansion:data menu_options.options[1] merge from storage luigis_mansion:data current_state.current_data.portrait_battle.portraits.components."minecraft:custom_data".model_data.silver
execute if data storage luigis_mansion:data menu_options.options[2] run data modify storage luigis_mansion:data menu_options.options[2] merge from storage luigis_mansion:data current_state.current_data.portrait_battle.portraits.components."minecraft:custom_data".model_data.gold
execute if data storage luigis_mansion:data menu_options.options[3] run data modify storage luigis_mansion:data menu_options.options[3] merge from storage luigis_mansion:data current_state.current_data.portrait_battle.portraits.components."minecraft:custom_data".model_data.platinum

data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:damage":22,"minecraft:unbreakable":{show_in_tooltip:0b},"minecraft:custom_model_data":6,"minecraft:attribute_modifiers":{modifiers:[]},"minecraft:item_name":'{"type":"translatable","translate":"luigis_mansion:item.menu.dialog.progress"}',"minecraft:custom_data":{option:{id:"portrait_battle_results_retry"}}}}

function luigis_mansion:entities/player/selection_menu/load
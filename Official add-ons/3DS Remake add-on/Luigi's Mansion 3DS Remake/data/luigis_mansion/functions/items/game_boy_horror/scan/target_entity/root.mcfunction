execute if entity @s[scores={EntitySizeWidth=1..}] run function luigis_mansion:items/game_boy_horror/scan/target_entity/collision_box_check
execute if entity @s[scores={EntitySizeRadius=1..}] run function luigis_mansion:items/game_boy_horror/scan/target_entity/collision_radius_check
execute if entity @s[tag=scanned,nbt=!{ArmorItems:[{tag:{scan_message:{message:"warp"}}}]},nbt={ArmorItems:[{tag:{scan_message:{sender:"me"}}}]}] unless data entity @s ArmorItems[3].tag.scan_message.plural_message unless entity @e[tag=entity_scanned,tag=this_interact,limit=1] run tellraw @a[tag=same_room] {"translate":"chat.type.text","with":[{"selector":"@s","color":"green"},{"nbt":"ArmorItems[3].tag.scan_message.message","entity":"@s","interpret":true}]}
execute if entity @s[tag=scanned,nbt=!{ArmorItems:[{tag:{scan_message:{message:"warp"}}}]},nbt={ArmorItems:[{tag:{scan_message:{sender:"me"}}}]}] if data entity @s ArmorItems[3].tag.scan_message.plural_message unless entity @e[tag=entity_scanned,tag=this_interact,limit=1] if score #players Totals matches 1 run tellraw @a[tag=same_room] {"translate":"chat.type.text","with":[{"selector":"@s","color":"green"},{"nbt":"ArmorItems[3].tag.scan_message.message","entity":"@s","interpret":true}]}
execute if entity @s[tag=scanned,nbt=!{ArmorItems:[{tag:{scan_message:{message:"warp"}}}]},nbt={ArmorItems:[{tag:{scan_message:{sender:"me"}}}]}] if data entity @s ArmorItems[3].tag.scan_message.plural_message unless entity @e[tag=entity_scanned,tag=this_interact,limit=1] if score #players Totals matches 2.. run tellraw @a[tag=same_room] {"translate":"chat.type.text","with":[{"selector":"@s","color":"green"},{"nbt":"ArmorItems[3].tag.scan_message.plural_message","entity":"@s","interpret":true}]}
execute if entity @s[tag=scanned,nbt=!{ArmorItems:[{tag:{scan_message:{message:"warp"}}}]},nbt={ArmorItems:[{tag:{scan_message:{sender:"scanner"}}}]}] unless entity @e[tag=entity_scanned,tag=this_interact,limit=1] if entity @p[tag=scanning_player,gamemode=!spectator,tag=!gooigi,limit=1] run tellraw @a[tag=same_room] {"translate":"chat.type.text","with":[{"selector":"@p[tag=scanning_player,gamemode=!spectator]","color":"green"},{"nbt":"ArmorItems[3].tag.scan_message.message","entity":"@s","interpret":true}]}
execute if entity @s[tag=scanned,nbt=!{ArmorItems:[{tag:{scan_message:{message:"warp"}}}]},nbt={ArmorItems:[{tag:{scan_message:{sender:"scanner"}}}]}] unless entity @e[tag=entity_scanned,tag=this_interact,limit=1] if entity @p[tag=scanning_player,gamemode=!spectator,tag=gooigi,limit=1] run tellraw @a[tag=same_room] {"translate":"chat.type.text","with":[{"selector":"@p[tag=scanning_player,gamemode=!spectator]","color":"green"},{"translate":"luigis_mansion_3ds_remake:message.player.scan_furniture.11"}]}
execute if entity @s[tag=scanned,nbt={ArmorItems:[{tag:{scan_message:{message:"warp"}}}]}] unless entity @e[tag=entity_scanned,tag=this_interact,limit=1] if score #can_warp Selected matches 1 as @p[tag=scanning_player,gamemode=!spectator,tag=!gooigi] unless entity @s[scores={Dialog=1..}] run tag @s add warp
execute if entity @s[tag=scanned,nbt={ArmorItems:[{tag:{scan_message:{message:"warp"}}}]}] unless entity @e[tag=entity_scanned,tag=this_interact,limit=1] if score #can_warp Selected matches 1 as @p[tag=scanning_player,gamemode=!spectator,tag=!gooigi,scores={Dialog=1..}] run tellraw @a[tag=same_room] {"translate":"chat.type.text","with":[{"selector":"@p[tag=scanning_player,gamemode=!spectator]","color":"green"},{"translate":"luigis_mansion:message.player.scan_furniture.96"}]}
execute if entity @s[tag=scanned,nbt={ArmorItems:[{tag:{scan_message:{message:"warp"}}}]}] unless entity @e[tag=entity_scanned,tag=this_interact,limit=1] if score #can_warp Selected matches 0 as @p[tag=scanning_player,gamemode=!spectator,tag=!gooigi] run tellraw @a[tag=same_room] {"translate":"chat.type.text","with":[{"selector":"@p[tag=scanning_player,gamemode=!spectator]","color":"green"},{"translate":"luigis_mansion:message.player.scan_furniture.96"}]}
execute if entity @s[tag=scanned,nbt={ArmorItems:[{tag:{scan_message:{message:"warp"}}}]}] unless entity @e[tag=entity_scanned,tag=this_interact,limit=1] if entity @p[tag=scanning_player,gamemode=!spectator,tag=gooigi,limit=1] run tellraw @a[tag=same_room] {"translate":"chat.type.text","with":[{"selector":"@p[tag=scanning_player,gamemode=!spectator]","color":"green"},{"translate":"luigis_mansion_3ds_remake:message.player.scan_furniture.11"}]}
execute if entity @s[tag=scanned] run tag @e[tag=this_interact,limit=1] add entity_scanned
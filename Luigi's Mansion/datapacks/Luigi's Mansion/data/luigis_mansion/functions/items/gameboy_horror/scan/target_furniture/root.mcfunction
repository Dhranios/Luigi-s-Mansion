execute if entity @s[scores={FurnitureSizeW=1..}] run function luigis_mansion:items/gameboy_horror/scan/target_furniture/collision_box_check
execute if entity @s[scores={FurnitureSizeF=1..}] run function luigis_mansion:items/gameboy_horror/scan/target_furniture/collision_rotated_box_check
execute if entity @s[scores={FurnitureRadius=1..}] run function luigis_mansion:items/gameboy_horror/scan/target_furniture/collision_radius_check
execute if entity @s[tag=hit,nbt=!{ArmorItems:[{tag:{scan_message:"warp"}}]}] unless entity @e[tag=furniture_scanned,tag=this_interact,limit=1] run tellraw @a {"translate":"chat.type.text","with":[{"selector":"@p[tag=scanning_player,gamemode=!spectator]","color":"green"},{"nbt":"ArmorItems[3].tag.scan_message","entity":"@s","interpret":true}]}
execute if entity @s[tag=hit,nbt={ArmorItems:[{tag:{scan_message:"warp"}}]}] unless entity @e[tag=furniture_scanned,tag=this_interact,limit=1] if score #can_warp Selected matches 1 as @p[tag=scanning_player,gamemode=!spectator] unless entity @s[scores={Dialog=1..}] run tag @s add warp
execute if entity @s[tag=hit,nbt={ArmorItems:[{tag:{scan_message:"warp"}}]}] unless entity @e[tag=furniture_scanned,tag=this_interact,limit=1] if score #can_warp Selected matches 1 as @p[tag=scanning_player,gamemode=!spectator,scores={Dialog=1..}] run tellraw @a {"translate":"chat.type.text","with":[{"selector":"@p[tag=scanning_player,gamemode=!spectator]","color":"green"},{"translate":"luigis_mansion:message.player.scan_furniture.96"}]}
execute if entity @s[tag=hit,nbt={ArmorItems:[{tag:{scan_message:"warp"}}]}] unless entity @e[tag=furniture_scanned,tag=this_interact,limit=1] if score #can_warp Selected matches 0 as @p[tag=scanning_player,gamemode=!spectator] run tellraw @a {"translate":"chat.type.text","with":[{"selector":"@p[tag=scanning_player,gamemode=!spectator]","color":"green"},{"translate":"luigis_mansion:message.player.scan_furniture.96"}]}
execute if entity @s[tag=hit] run tag @e[tag=this_interact,limit=1] add furniture_scanned
tag @s remove hit
summon minecraft:armor_stand ~ ~ ~ {NoGravity:1b,Marker:1b,Invisible:1b,Tags:["source","luigi_model","model_piece","new","found_owner"],CustomName:'{"type":"translatable","translate":"luigis_mansion:entity.luigi"}'}
summon minecraft:armor_stand ~ ~ ~ {NoGravity:1b,Marker:1b,Invisible:1b,Tags:["head","luigi_model","model_piece","new","found_owner"],CustomName:'{"type":"translatable","translate":"luigis_mansion:entity.luigi"}',ArmorItems:[{},{},{},{id:"minecraft:leather_chestplate",count:1,components:{"minecraft:item_model":"luigis_mansion:entity/luigi","minecraft:unbreakable":{},"minecraft:damage":1,"minecraft:max_damage":7,"minecraft:custom_model_data":0,"minecraft:dyed_color":{rgb:37129},"minecraft:custom_data":{model_data:{default:{components:{"minecraft:custom_model_data":0}},scared:{components:{"minecraft:custom_model_data":1}},dead:{components:{"minecraft:custom_model_data":2}},squished:{components:{"minecraft:custom_model_data":3}}},model_data_2:{default:{components:{"minecraft:custom_model_data":4}},scared:{components:{"minecraft:custom_model_data":5}},dead:{components:{"minecraft:custom_model_data":6}},squished:{components:{"minecraft:custom_model_data":7}}}}}}]}
summon minecraft:armor_stand ~ ~ ~ {NoGravity:1b,Marker:1b,Invisible:1b,Tags:["right_arm","luigi_model","model_piece","new","found_owner"],CustomName:'{"type":"translatable","translate":"luigis_mansion:entity.luigi"}',ArmorItems:[{},{},{},{id:"minecraft:leather_chestplate",count:1,components:{"minecraft:item_model":"luigis_mansion:entity/luigi","minecraft:unbreakable":{},"minecraft:damage":2,"minecraft:max_damage":7,"minecraft:custom_model_data":0,"minecraft:custom_data":{model_data:{default:{components:{"minecraft:custom_model_data":0}},squished:{components:{"minecraft:custom_model_data":1}},model_data_2:{default:{components:{"minecraft:custom_model_data":2}},squished:{components:{"minecraft:custom_model_data":3}}},mirror:{components:{"minecraft:damage":3}}},"minecraft:dyed_color":{rgb:37129}}}}]}
summon minecraft:armor_stand ~ ~ ~ {NoGravity:1b,Marker:1b,Invisible:1b,Tags:["right_arm","held_item","luigi_model","model_piece","new","found_owner"],CustomName:'{"type":"translatable","translate":"luigis_mansion:entity.luigi"}'}
summon minecraft:armor_stand ~ ~ ~ {NoGravity:1b,Marker:1b,Invisible:1b,Tags:["left_arm","luigi_model","model_piece","new","found_owner"],CustomName:'{"type":"translatable","translate":"luigis_mansion:entity.luigi"}',ArmorItems:[{},{},{},{id:"minecraft:leather_chestplate",count:1,components:{"minecraft:item_model":"luigis_mansion:entity/luigi","minecraft:unbreakable":{},"minecraft:damage":3,"minecraft:max_damage":7,"minecraft:custom_model_data":0,"minecraft:custom_data":{model_data:{default:{components:{"minecraft:custom_model_data":0}},squished:{components:{"minecraft:custom_model_data":1}},model_data_2:{default:{components:{"minecraft:custom_model_data":2}},squished:{components:{"minecraft:custom_model_data":3}}},mirror:{components:{"minecraft:damage":2}}},"minecraft:dyed_color":{rgb:37129}}}}]}
summon minecraft:armor_stand ~ ~ ~ {NoGravity:1b,Marker:1b,Invisible:1b,Tags:["left_arm","held_item","luigi_model","model_piece","new","found_owner"],CustomName:'{"type":"translatable","translate":"luigis_mansion:entity.luigi"}'}
summon minecraft:armor_stand ~ ~ ~ {NoGravity:1b,Marker:1b,Invisible:1b,Tags:["chest","luigi_model","model_piece","new","found_owner"],CustomName:'{"type":"translatable","translate":"luigis_mansion:entity.luigi"}',ArmorItems:[{},{},{},{id:"minecraft:leather_chestplate",count:1,components:{"minecraft:item_model":"luigis_mansion:entity/luigi","minecraft:unbreakable":{},"minecraft:damage":4,"minecraft:max_damage":7,"minecraft:custom_model_data":0,"minecraft:dyed_color":{rgb:37129},"minecraft:custom_data":{model_data:{default:{components:{"minecraft:custom_model_data":0}},squished_right:{components:{"minecraft:custom_model_data":1}},squished_left:{components:{"minecraft:custom_model_data":2}}},model_data_2:{default:{components:{"minecraft:custom_model_data":3}},squished_right:{components:{"minecraft:custom_model_data":4}},squished_left:{components:{"minecraft:custom_model_data":5}}}}}}]}
summon minecraft:armor_stand ~ ~ ~ {NoGravity:1b,Marker:1b,Invisible:1b,Tags:["right_leg","luigi_model","model_piece","new","found_owner"],CustomName:'{"type":"translatable","translate":"luigis_mansion:entity.luigi"}',ArmorItems:[{},{},{},{id:"minecraft:leather_chestplate",count:1,components:{"minecraft:item_model":"luigis_mansion:entity/luigi","minecraft:unbreakable":{},"minecraft:damage":5,"minecraft:max_damage":7,"minecraft:custom_model_data":0,"minecraft:custom_data":{model_data:{default:{components:{"minecraft:custom_model_data":0}},squished:{components:{"minecraft:custom_model_data":1}},model_data_2:{default:{components:{"minecraft:custom_model_data":2}},squished:{components:{"minecraft:custom_model_data":3}}},mirror:{components:{"minecraft:damage":6}}},"minecraft:dyed_color":{rgb:37129}}}}]}
summon minecraft:armor_stand ~ ~ ~ {NoGravity:1b,Marker:1b,Invisible:1b,Tags:["left_leg","luigi_model","model_piece","new","found_owner"],CustomName:'{"type":"translatable","translate":"luigis_mansion:entity.luigi"}',ArmorItems:[{},{},{},{id:"minecraft:leather_chestplate",count:1,components:{"minecraft:item_model":"luigis_mansion:entity/luigi","minecraft:unbreakable":{},"minecraft:damage":6,"minecraft:max_damage":7,"minecraft:custom_model_data":0,"minecraft:custom_data":{model_data:{default:{components:{"minecraft:custom_model_data":0}},squished:{components:{"minecraft:custom_model_data":1}},model_data_2:{default:{components:{"minecraft:custom_model_data":2}},squished:{components:{"minecraft:custom_model_data":3}}},mirror:{components:{"minecraft:damage":5}}},"minecraft:dyed_color":{rgb:37129}}}}]}
summon minecraft:armor_stand ~ ~ ~ {NoGravity:1b,Marker:1b,Invisible:1b,Tags:["poltergust_body","luigi_model","model_piece","new","found_owner"],CustomName:'{"type":"translatable","translate":"luigis_mansion:entity.luigi"}'}
scoreboard players operation #temp ID = @s ID
execute at @s as @e[tag=luigi_model,tag=new] run scoreboard players operation @s ID = #temp ID
scoreboard players reset #temp ID
execute in minecraft:overworld run loot spawn 27 0 0 loot luigis_mansion:gameplay/get_player_name
execute in minecraft:overworld run setblock 27 0 0 minecraft:oak_sign{front_text:{messages:['{"source":"entity","entity":"@e[type=minecraft:item,nbt={Item:{id:\'minecraft:player_head\'}},limit=1]","type":"nbt","nbt":"Item.components.\'minecraft:profile\'.name"}','{"type":"text","text":""}','{"type":"text","text":""}','{"type":"text","text":""}']}}
execute in minecraft:overworld run data modify entity @e[tag=luigi_model,tag=source,tag=new,limit=1] CustomName set from block 27 0 0 front_text.messages[0]
execute in minecraft:overworld run setblock 27 0 0 minecraft:bedrock
execute in minecraft:overworld run kill @e[x=27.5,y=0.0,z=0.5,distance=..0.7,type=minecraft:item,limit=1]
execute if score #global_player_names Selected matches 0 run data merge entity @e[tag=luigi_model,tag=source,tag=new,limit=1] {CustomNameVisible:0b}
execute if score #global_player_names Selected matches 1 run data merge entity @e[tag=luigi_model,tag=source,tag=new,limit=1] {CustomNameVisible:1b}
function luigis_mansion:entities/player/get_color
execute as @e[tag=luigi_model,tag=new,tag=!held_item,tag=!poltergust_body,tag=!source] store result entity @s ArmorItems[3].components."minecraft:dyed_color".rgb int 1 run scoreboard players get #temp Time
execute if score #temp2 Time matches 1 as @e[tag=luigi_model,tag=new] run data modify entity @s ArmorItems[3].components."minecraft:custom_data".model_data set from entity @s ArmorItems[3].components."minecraft:custom_data".model_data_2
execute if score #temp2 Time matches 1 as @e[tag=luigi_model,tag=new] run data modify entity @s ArmorItems[3] merge from entity @s ArmorItems[3].components."minecraft:custom_data".model_data
execute as @e[tag=luigi_model,tag=new] run data remove entity @s ArmorItems[3].components."minecraft:custom_data".model_data_2
scoreboard players reset #temp Time
scoreboard players reset #temp2 Time
tag @e[tag=luigi_model,tag=new] remove new
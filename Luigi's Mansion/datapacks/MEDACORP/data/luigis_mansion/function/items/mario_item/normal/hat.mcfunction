data modify storage luigis_mansion:data current_state.current_data.obtained_items merge value {marios_hat:1b}
function luigis_mansion:items/mario_item/message/hat